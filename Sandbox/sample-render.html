<html>
<head>
<title>Sample MOI Rendering Using Javascript</title>
<script src="render.js"></script>
<script>
var animation = true;

function stopAnimation()
{
  animation=false;
} // stopAnimation 

function startAnimation()
{
  animation = true;
  frame();
} // startAnimation

function saveImage()
{
var canvas1 = document.getElementById("gui");
var ctx = canvas1.getContext("2d"); 
var dataURL = canvas1.toDataURL("image/jpeg");
document.write('<img src="'+img+'"/>');
//var oImgJPEG = Can9*vas2Image.saveAsJPEG(oCanvas, true);   
}

function putImage() {
var canvas1 = document.getElementById("gui");
if (canvas1.getContext) {
var ctx = canvas1.getContext("2d");           // Get the context for the canvas.
var myImage = canvas1.toDataURL("image/png");    // Get the data as an image.
}
var imageElement = document.getElementById("MyPix");  // Get the img object.
imageElement.src = myImage;                           // Set the src to data from the canvas.
}

function frame()
{
var funbody = document.getElementById("rfun").value;
var fun = MOIbody2fun(funbody);
var canvas = document.getElementById("gui");
renderFun(fun, canvas, 50, 50, 1000, 1000);
if (animation)
setTimeout(frame, 50);
} // frame

</script>
</head>
<body>
<h1>Sample MOI Rendering</h1>
<p>
<a href="file:///home/fordhame17/Glimmer/MathOverImages/Sandbox/rgb-render.html">Sample
  MOI RGB Rendering</a>
<a href="file:///home/fordhame17/Glimmer/MathOverImages/Sandbox/hsv-render.html">Sample
  MOI HSV Rendering</a>
</p>
<canvas id="gui" width="550" height="550"></canvas>
<img id="MyPix" src=""/>
<script>
var gui = document.getElementById("gui");
gui.onmousemove = function(evt) 
                     { 
                       var rect = gui.getBoundingClientRect();
                       setMouse(evt.clientX - rect.left, 
                                evt.clientY - rect.top);
                     };
gui.onmouseclick  = function(evt) 
                     { 
                       var rect = gui.getBoundingClientRect();
                       setClick(evt.clientX - rect.left, 
                                evt.clientY - rect.top);
                     };
gui.onmousedown = gui.onmouseclick;
</script>
<form>
<h4>Functional Imaging using X & Y</h4>
<table>
  <tr>
    <td>Function</td>
    <td><input type="text" name="fun" id="rfun" size="100" value="x+y"/></td>
  </tr>
</table>
<input type="button" value="Go!" onclick="startAnimation()">
<input type="button" value="Stop" onclick="stopAnimation()">
<input type="button" value="Save Image" onclick="putImage()">
<input >
</form>
</body>
</html>
